/* --- Layout & base --- */
* { box-sizing: border-box; }
html, body, #root { height: 100%; margin: 0; font-family: system-ui, Arial; }
.app { display:flex; height:100vh; background:#0f171c; color:#e9edef; }

/* --- Sidebar --- */
.sidebar {
  width: 340px;
  display:flex; flex-direction:column;
  border-right:1px solid #223038;
  background:#18252c;
}
.sidebar-header {
  padding:12px 16px;
  font-weight:700;
  border-bottom:1px solid #223038;
  background:#1e2f37;
  position:sticky; top:0; z-index:3;
}

/* Search bar */
.sidebar .search {
  padding:10px 12px;
  border-bottom:1px solid #223038;
  background:#18252c;
}
.sidebar .search input {
  width:100%; padding:10px 12px;
  border-radius:12px; border:1px solid #2a3b44;
  background:#0f171c; color:#e9edef;
}
.sidebar .search input::placeholder { color:#93a4ad; }

/* Chat list */
.chat-list { overflow:auto; }
.chat-item {
  display:flex; align-items:center; gap:10px;
  width:100%; text-align:left; padding:10px 12px;
  border:0; background:transparent; color:#e9edef;
  border-bottom:1px solid #1f2c33; cursor:pointer;
}
.chat-item:hover { background:#243743; }
.chat-item.active { background:#2e4350; }

.avatar {
  height:40px; width:40px; flex:0 0 40px;
  border-radius:50%; background:#324752;
  display:grid; place-items:center; font-weight:700; color:#cfe7f0;
}
.chat-meta { flex:1; overflow:hidden; }
.chat-title { font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.chat-sub { opacity:.8; font-size:12px; margin-top:3px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.badge {
  min-width:20px; padding:2px 6px; border-radius:10px;
  background:#23a365; color:#fff; font-size:11px; font-weight:700;
}

/* --- Chat area --- */
.chat { flex:1; display:flex; flex-direction:column; }
.chat-header {
  padding:12px 16px; border-bottom:1px solid #223038; font-weight:700;
  background:#111b21; position:sticky; top:0; z-index:2;
}

/* Messages background */
.messages {
  position:relative;
  flex:1; overflow:auto; padding:16px 18px 84px;
  background: linear-gradient(rgba(255,255,255,.07), rgba(255,255,255,.07));
}

/* Date chips */
.date-chip {
  display:inline-block; margin:8px auto; padding:6px 10px;
  background:#1f2c33; border-radius:12px; font-size:12px; opacity:.9;
}

/* Bubbles */
.bubble {
  max-width: 74%;
  padding: 10px 12px;
  margin: 6px 0;
  line-height: 1.4;
  border-radius: 18px;
  box-shadow: 0 2px 4px rgba(0,0,0,.25);
  background-image: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  transition: transform .05s ease, box-shadow .05s ease;
  position: relative; /* Needed for actions */
}
.bubble:hover { transform: translateY(-1px); box-shadow: 0 3px 6px rgba(0,0,0,.28); }

.incoming { background:#2a3b44; align-self:flex-start; border-top-left-radius: 6px; }
.outgoing { background:#04745f; align-self:flex-end;   border-top-right-radius: 6px; }

.bubble-text { white-space:pre-wrap; font-size:14px; }
.bubble-meta { opacity:.78; font-size:11px; margin-top:6px; text-align:right; display:flex; gap:6px; align-items:center; justify-content:flex-end; }

/* Read receipts */
.tick { font-size:12px; opacity:.9; }
.tick.double { letter-spacing:-1px; }
.tick.read   { color:#53bdeb; }

/* --- Delete button on hover --- */
.bubble-actions {
  position: absolute;
  top: 6px;
  right: 8px;
  opacity: 0;
  transition: opacity 0.12s;
}
.bubble:hover .bubble-actions {
  opacity: 1;
}
.bubble-actions .action {
  border: 0;
  border-radius: 8px;
  padding: 4px 6px;
  background: rgba(0,0,0,.25);
  color: #fff;
  cursor: pointer;
  font-size: 13px;
}
.bubble-actions .action:hover {
  background: rgba(0,0,0,.35);
}

/* Composer */
.composer {
  display:flex; gap:8px; padding:10px;
  border-top:1px solid #223038; background:#111b21;
  position:sticky; bottom:0; z-index:2;
}
.composer input {
  flex:1; padding:12px; border-radius:18px;
  border:1px solid #223038; background:#0f171c; color:#e9edef;
}
.composer input::placeholder { color:#93a4ad; }
.composer button {
  padding:10px 16px; border-radius:18px; border:0;
  background:#23a365; color:#fff; cursor:pointer; font-weight:700;
}
.composer button:hover { filter:brightness(1.06); }
.composer button:active { transform:translateY(1px); }

/* Scrollbar for desktop */
.messages::-webkit-scrollbar { width: 10px; }
.messages::-webkit-scrollbar-thumb { background:#203038; border-radius:8px; }
.messages::-webkit-scrollbar-track { background:transparent; }

@media (max-width: 800px) {
  .sidebar { width: 42%; }
  .bubble { max-width: 86%; }
}
